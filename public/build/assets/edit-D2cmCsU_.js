import{r as x,j as e,L as W,S as V}from"./app-BosIeRg7.js";import{B as b}from"./button-TMo85o57.js";import{C as q}from"./calendar-uE0uDOmX.js";import{C as $}from"./checkbox-9SDoulfQ.js";import{C as Y,a as Q,b as X,c as Z,d as ee,e as ae}from"./command-3U5-pTDH.js";import{u as re,F as se,a as o,b as n,c as l,d,e as m,f as c}from"./form-Ck7qMHgQ.js";import{I as h}from"./input-Dmo4WzKc.js";import{L as ie}from"./label-DkMhdupt.js";import{P as T,a as L,b as F}from"./popover-DS7lNbr6.js";import{R as te,a as R}from"./radio-group-_D_8ur0M.js";import{S as ne}from"./switch-gvdobc09.js";import{T as E}from"./textarea-CcNp8KRH.js";import{A as le}from"./admin-layout-BiSjvqE7.js";import{c as j,r as D,p as I}from"./utils-s7bil_xp.js";import{s as oe,o as me,b as p,e as de,n as v,c as ce,f as pe,a as he}from"./types-CI4SqGhG.js";import{E as ue}from"./Editor-BM3KdJu6.js";import{t as H}from"./index-DICbwMzx.js";import{P as U}from"./package-HvGFQDJa.js";import{C as xe}from"./chevrons-up-down-DU0Gm5LB.js";import{C as ge}from"./check-B8mMDSsr.js";import{C as M}from"./calendar-hLJ-rjR0.js";import{C as je}from"./clock-B6d6AEa1.js";import{p as fe}from"./parseISO-CfmKIOEe.js";import{f as B}from"./format-CNjBDjOL.js";import{i as ke}from"./id-BLKIQCr7.js";/* empty css            */import"./index-C6BQOKi5.js";import"./index-CtGk9L1P.js";import"./chevron-left-DkrN1Qpc.js";import"./createLucideIcon-BpQ-z4yv.js";import"./chevron-right-DfSErBBb.js";import"./chevron-down-C8Lewvy7.js";import"./index-BWLzd_1T.js";import"./index-BYdOno7l.js";import"./index-D5b9_BX5.js";import"./index-BkIJUB_F.js";import"./index-CdiTP_x4.js";import"./index-CXTDLnC7.js";import"./index-DlufhD0G.js";import"./index-Co6is8CA.js";import"./Combination-OR_foTDg.js";import"./index-D-LpAf02.js";import"./dialog-LYFAXDoT.js";import"./x-DyVjFITz.js";import"./search-o4O4TxX_.js";import"./floating-ui.react-dom-KSuQb6xu.js";import"./dropdown-menu-DFa7Uoxv.js";import"./index-LTdIXPFw.js";import"./index-AbzvFQxn.js";import"./sonner-TgCCCbnK.js";import"./breadcrumbs-Bod1dgXB.js";import"./tooltip-Bwq4-6Kr.js";import"./index-RpOf7_-b.js";import"./avatar-B6TjRBpk.js";import"./use-initials-S8Funam-.js";import"./user-BUrT8Ur8.js";import"./breadcrumb-Bjyb-tL8.js";import"./app-sidebar-header-B-rOj9KG.js";import"./user-check-Db_aXoo4.js";import"./users-BudSnWF8.js";import"./monitor-play-B085WIka.js";import"./presentation-DKTxkwyK.js";import"./gift-ChOeZ2CC.js";import"./banknote-Dy7jErW4.js";import"./dollar-sign-fRR_DSUj.js";import"./file-text-DfRjcFjY.js";import"./index-BwapjOoU.js";const be=[{value:"Senin",label:"Senin"},{value:"Selasa",label:"Selasa"},{value:"Rabu",label:"Rabu"},{value:"Kamis",label:"Kamis"},{value:"Jumat",label:"Jumat"},{value:"Sabtu",label:"Sabtu"},{value:"Minggu",label:"Minggu"}],ve=me({title:p().nonempty("Judul harus diisi"),category_id:p().nonempty("Kategori harus dipilih"),short_description:p().nullable(),description:p().nullable(),key_points:p().nullable(),thumbnail:he().nullable(),registration_deadline:pe({required_error:"Batas waktu pendaftaran harus diisi",invalid_type_error:"Batas waktu pendaftaran harus berupa tanggal yang valid"}),duration_days:v().min(0,"Durasi tidak boleh negatif").nullable(),schedule_days:ce(p()).min(1,"Pilih minimal 1 hari"),strikethrough_price:v().min(0,"Harga tidak boleh negatif"),price:v().min(0,"Harga tidak boleh negatif"),registration_url:p().url("URL pendaftaran harus valid").nonempty("URL pendaftaran harus diisi"),type:de(["regular","scholarship"],{required_error:"Tipe kategori harus dipilih"}),scholarship_group_link:p().url("Link grup harus berupa URL yang valid").nullable()}).refine(r=>r.strikethrough_price>0?r.strikethrough_price>r.price:!0,{message:"Harga coret harus lebih besar dari harga normal.",path:["strikethrough_price"]}).refine(r=>r.type==="scholarship"?r.scholarship_group_link&&r.scholarship_group_link.trim()!=="":!0,{message:"Link grup WhatsApp/Telegram harus diisi untuk tipe Beasiswa",path:["scholarship_group_link"]});function Ia({product:r,categories:y}){const[A,_]=x.useState(!1),[N,G]=x.useState(r.strikethrough_price>0),[C,P]=x.useState(null),[J,f]=x.useState(!1),[K,w]=x.useState(!1),O=[{title:"Sertifikasi Kerjasama",href:route("partnership-products.index")},{title:r.title,href:route("partnership-products.show",r.id)},{title:"Edit Produk",href:route("partnership-products.edit",r.id)}],t=re({resolver:oe(ve),defaultValues:{title:r.title??"",category_id:r.category_id??"",short_description:r.short_description??"",description:r.description??"",key_points:r.key_points??"",thumbnail:null,registration_deadline:r.registration_deadline?fe(r.registration_deadline):void 0,duration_days:r.duration_days??null,schedule_days:r.schedule_days??[],strikethrough_price:r.strikethrough_price??0,price:r.price??0,registration_url:r.registration_url??"",type:r.type??"regular",scholarship_group_link:r.scholarship_group_link??""}});function z(a){const s=new Date(a.registration_deadline);s.setHours(23,59,59,999);const i={...a,registration_deadline:B(s,"yyyy-MM-dd HH:mm:ss")};V.post(route("partnership-products.update",r.id),{...i,_method:"PUT"},{forceFormData:!0})}return e.jsxs(le,{breadcrumbs:O,children:[e.jsx(W,{title:`Edit Produk - ${r.title}`}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:["Edit ",r.title]}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:'Edit informasi produk partnership. Setelah selesai, klik tombol "Simpan Perubahan" untuk menyimpan.'}),e.jsx(se,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(z),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:16}),e.jsx("h3",{className:"font-medium",children:"Informasi Produk"})]}),e.jsx(o,{control:t.control,name:"title",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(l,{children:["Judul Produk ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{children:e.jsx(h,{placeholder:"Masukkan judul produk",...a,autoComplete:"off"})}),e.jsx(m,{})]})}),e.jsx(o,{control:t.control,name:"category_id",render:({field:a})=>{var s;return e.jsxs(n,{className:"flex flex-col",children:[e.jsxs(l,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(T,{open:A,onOpenChange:_,children:[e.jsx(L,{asChild:!0,children:e.jsx(d,{children:e.jsxs(b,{variant:"outline",role:"combobox",className:j("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(s=y.find(i=>i.id===a.value))==null?void 0:s.name:"Pilih kategori",e.jsx(xe,{className:"opacity-50"})]})})}),e.jsx(F,{className:"p-0",children:e.jsxs(Y,{children:[e.jsx(Q,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(X,{children:[e.jsx(Z,{children:"Tidak ada kategori ditemukan."}),e.jsx(ee,{children:y.map(i=>e.jsxs(ae,{value:i.name,onSelect:()=>{t.setValue("category_id",i.id),_(!1)},children:[i.name,e.jsx(ge,{className:j("ml-auto",i.id===a.value?"opacity-100":"opacity-0")})]},i.id))})]})]})})]}),e.jsx(m,{})]})}}),e.jsx(o,{control:t.control,name:"short_description",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Deskripsi Singkat"}),e.jsx(E,{...a,value:a.value??"",placeholder:"Deskripsi singkat produk (maks 500 karakter)",maxLength:500,autoComplete:"off"}),e.jsx(m,{})]})}),e.jsx(o,{control:t.control,name:"description",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Deskripsi Lengkap"}),e.jsx(E,{...a,value:a.value??"",placeholder:"Deskripsi lengkap produk",rows:6,autoComplete:"off"}),e.jsx(m,{})]})}),e.jsx(o,{control:t.control,name:"key_points",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Poin-Poin Penting"}),e.jsx(ue,{apiKey:"f3upn9g1gl6r4m6ybrpbtceg23fxg21slzsgyhg0bui1qq4m",value:a.value??"",onEditorChange:s=>a.onChange(s),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",height:300,menubar:!1}}),e.jsx(c,{children:"Format poin-poin penting dengan bullet list atau numbering"}),e.jsx(m,{})]})}),e.jsx(o,{control:t.control,name:"thumbnail",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Thumbnail"}),e.jsx("img",{src:C||(r.thumbnail?`/storage/${r.thumbnail}`:"/assets/images/placeholder.png"),alt:r.title,className:"my-1 mt-2 h-56 rounded border object-cover"}),e.jsx(h,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg, image/webp",className:J?"border-red-500 focus-visible:ring-red-500":"",onChange:s=>{var g;const i=((g=s.target.files)==null?void 0:g[0])??null;if(i){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(i.type)){f(!0),H.error("Gambar harus png, jpg, jpeg, atau webp");return}if(i.size>2*1024*1024){f(!0),H.error("Ukuran file maksimal 2MB!");return}}if(f(!1),a.onChange(i),i){const u=new FileReader;u.onload=k=>{var S;return P((S=k.target)==null?void 0:S.result)},u.readAsDataURL(i)}else P(null)}}),e.jsx(c,{children:"Format: PNG, JPG, JPEG, WEBP. Maksimal 2MB"}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:16}),e.jsx("h3",{className:"font-medium",children:"Harga, Jadwal & URL"})]}),e.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{id:"show-strikethrough",checked:N,onCheckedChange:a=>{G(a),a||t.setValue("strikethrough_price",0)}}),e.jsx(ie,{htmlFor:"show-strikethrough",children:"Aktifkan Harga Coret (Opsional)"})]}),N&&e.jsx(o,{control:t.control,name:"strikethrough_price",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Harga Coret"}),e.jsx(h,{...a,type:"text",placeholder:"Rp 0",value:D.format(a.value||0),onChange:s=>a.onChange(I(s.target.value)),autoComplete:"off"}),e.jsx(c,{children:"Harga asli yang akan ditampilkan tercoret."}),e.jsx(m,{})]})})]}),e.jsx(o,{control:t.control,name:"price",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(l,{children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(h,{...a,type:"text",placeholder:"Masukkan harga produk",value:D.format(a.value||0),onChange:s=>a.onChange(I(s.target.value)),autoComplete:"off"}),e.jsx(m,{})]})}),e.jsx(o,{control:t.control,name:"type",render:({field:a})=>e.jsxs(n,{className:"space-y-3",children:[e.jsxs(l,{children:["Tipe Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{children:e.jsxs(te,{onValueChange:a.onChange,defaultValue:a.value,className:"flex flex-col space-y-1",children:[e.jsxs(n,{className:"flex items-center space-y-0 space-x-3",children:[e.jsx(d,{children:e.jsx(R,{value:"regular"})}),e.jsx(l,{className:"font-normal",children:"Reguler"})]}),e.jsxs(n,{className:"flex items-center space-y-0 space-x-3",children:[e.jsx(d,{children:e.jsx(R,{value:"scholarship"})}),e.jsx(l,{className:"font-normal",children:"Beasiswa"})]})]})}),e.jsx(c,{children:"Pilih apakah produk ini termasuk program reguler atau beasiswa."}),e.jsx(m,{})]})}),t.watch("type")==="scholarship"&&e.jsx(o,{control:t.control,name:"scholarship_group_link",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(l,{children:["Link Grup WhatsApp/Telegram ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{children:e.jsx(h,{...a,type:"url",placeholder:"https://chat.whatsapp.com/xxxxx atau https://t.me/xxxxx",value:a.value??""})}),e.jsx(c,{children:"Link grup WhatsApp atau Telegram untuk peserta beasiswa yang diterima."}),e.jsx(m,{})]})}),e.jsxs("div",{className:"space-y-4 rounded-md border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("h4",{className:"font-medium",children:"Informasi Jadwal"})]}),e.jsx(o,{control:t.control,name:"registration_deadline",render:({field:a})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsxs(l,{children:["Batas Waktu Pendaftaran ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(T,{open:K,onOpenChange:w,children:[e.jsx(L,{asChild:!0,children:e.jsx(d,{children:e.jsxs(b,{variant:"outline",className:j("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?B(a.value,"PPP",{locale:ke}):e.jsx("span",{children:"Pilih tanggal"}),e.jsx(M,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(F,{className:"w-auto p-0",align:"start",children:e.jsx(q,{mode:"single",selected:a.value,captionLayout:"dropdown",endMonth:new Date(new Date().getFullYear()+10,11),onSelect:s=>{s&&a.onChange(s),w(!1)},disabled:s=>{const i=new Date;return i.setHours(0,0,0,0),s<i},initialFocus:!0})})]}),e.jsx(c,{children:"Tanggal terakhir untuk melakukan pendaftaran"}),e.jsx(m,{})]})}),e.jsx(o,{control:t.control,name:"schedule_days",render:()=>e.jsxs(n,{children:[e.jsxs(l,{children:["Hari Pelaksanaan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:"Pilih hari-hari pelaksanaan program"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:be.map(a=>e.jsx(o,{control:t.control,name:"schedule_days",render:({field:s})=>{var i;return e.jsxs(n,{className:"flex flex-row items-center space-y-0 space-x-3",children:[e.jsx(d,{children:e.jsx($,{checked:(i=s.value)==null?void 0:i.includes(a.value),onCheckedChange:g=>{var u;return g?s.onChange([...s.value||[],a.value]):s.onChange((u=s.value)==null?void 0:u.filter(k=>k!==a.value))}})}),e.jsx(l,{className:"cursor-pointer font-normal",children:a.label})]},a.value)}},a.value))}),e.jsx(m,{})]})}),e.jsx(o,{control:t.control,name:"duration_days",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Durasi Program (Hari)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"text-muted-foreground h-4 w-4"}),e.jsx(d,{children:e.jsx(h,{type:"number",placeholder:"0",min:"0",...a,value:a.value??"",onChange:s=>a.onChange(s.target.value?parseInt(s.target.value):null),autoComplete:"off",className:"flex-1"})})]}),e.jsx(c,{children:"Total durasi program dalam hari (kosongkan jika tidak ada)"}),e.jsx(m,{})]})})]}),e.jsx(o,{control:t.control,name:"registration_url",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(l,{children:["URL Pendaftaran Eksternal ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(h,{...a,value:a.value??"",type:"url",placeholder:"https://partner.com/register",autoComplete:"off"}),e.jsx(c,{children:"URL untuk mengarahkan user mendaftar/membeli produk di website partner"}),e.jsx(m,{})]})}),e.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-4",children:[e.jsx("h4",{className:"mb-2 font-medium text-gray-900",children:"Status Produk"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("div",{className:j("w-fit rounded-full border px-3 py-1",r.status==="draft"&&"border-gray-200 bg-gray-100 text-gray-700",r.status==="published"&&"border-green-200 bg-green-100 text-green-700",r.status==="archived"&&"border-red-200 bg-red-100 text-red-700"),children:e.jsxs("span",{className:"font-medium capitalize",children:[r.status==="draft"&&"Draft",r.status==="published"&&"Terbit",r.status==="archived"&&"Arsip"]})}),e.jsx("p",{className:"text-muted-foreground pt-2 text-xs",children:"Ubah status produk di halaman detail setelah menyimpan perubahan."})]})]}),e.jsxs("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-4",children:[e.jsx("h4",{className:"mb-2 font-medium text-amber-900",children:"Informasi Penting"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-sm text-amber-800",children:[e.jsx("li",{children:"Produk ini tidak dijual di platform"}),e.jsx("li",{children:"User akan diarahkan ke URL pendaftaran eksternal"}),e.jsx("li",{children:"Setiap klik akan dicatat untuk statistik"}),e.jsx("li",{children:"Pastikan URL pendaftaran valid dan aktif"})]})]})]}),e.jsx(b,{type:"submit",className:"hover:cursor-pointer lg:col-span-2",children:"Simpan Perubahan"})]})})]})]})}export{Ia as default};
