import{r as i,m as R,j as e}from"./app-MJnXPJTR.js";import{I as l}from"./input-error-BXBBEtym.js";import{B as v}from"./button-D8ZOub8V.js";import{b as k,c as B,d as L,e as z,f as P}from"./dialog-B0bkuwXo.js";import{I as d}from"./input-C60pUzQS.js";import{L as c}from"./label-BQGDO_2u.js";import{T as U}from"./textarea-D71WE8ed.js";import{t as b}from"./index-CFMrrp9j.js";import"./utils-CUqJu1qg.js";import"./index-Btu9k_tb.js";import"./index-BMcBjRZu.js";import"./index-f_PI-uk2.js";import"./index-Cwht8YfP.js";import"./Combination-DFY99MmO.js";import"./x-BpNdBcWT.js";import"./createLucideIcon-B3sKuZQv.js";function ee({tool:s,setOpen:g}){const f=i.useRef(null),y=i.useRef(null),N=i.useRef(null),[C,h]=i.useState(s.icon?`/storage/${s.icon}`:null),[D,m]=i.useState(!1),{data:n,setData:r,post:E,processing:I,reset:T,errors:t,clearErrors:u}=R({name:s.name,slug:s.slug,description:s.description,icon:null});i.useEffect(()=>{r({name:s.name,slug:s.slug,description:s.description,icon:null}),u()},[s,r,u]);const S=a=>a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),F=a=>{a.preventDefault(),E(route("tools.update",s.id),{method:"put",...n,preserveScroll:!0,forceFormData:!0,onSuccess:()=>{g(!1),T(),u()},onError:()=>{var o;return(o=f.current)==null?void 0:o.focus()}})};return e.jsxs(k,{children:[e.jsx(B,{children:"Edit Tool"}),e.jsx(L,{children:"Ubah nama atau slug tool."}),e.jsxs("form",{className:"space-y-6",onSubmit:F,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"name",className:"sr-only",children:"Nama Tool"}),e.jsx(d,{id:"name",type:"text",name:"name",ref:f,value:n.name,onChange:a=>{r("name",a.target.value),r("slug",S(a.target.value))},placeholder:"Nama Kategori",autoComplete:"off"}),e.jsx(l,{message:t.name}),e.jsx(c,{htmlFor:"slug",className:"sr-only",children:"Slug"}),e.jsx(d,{id:"slug",type:"text",name:"slug",value:n.slug,onChange:a=>r("slug",a.target.value),placeholder:"Slug",autoComplete:"off",disabled:!0}),e.jsx(l,{message:t.slug}),e.jsx(c,{htmlFor:"description",className:"sr-only",children:"Deskripsi"}),e.jsx(U,{id:"description",name:"description",ref:y,value:n.description??"",onChange:a=>r("description",a.target.value),placeholder:"Deskripsi (opsional)",className:"resize-none"}),e.jsx(l,{message:t.description}),e.jsx(c,{htmlFor:"icon",className:"sr-only",children:"Icon"}),e.jsx("img",{src:C||"/assets/images/placeholder.png",alt:"Preview Icon",className:"my-1 mt-2 h-24 w-24 rounded border object-cover"}),e.jsx(d,{id:"icon",type:"file",name:"icon",ref:N,accept:"image/png, image/jpeg, image/jpg",className:D?"border-red-500 focus-visible:ring-red-500":"",onChange:a=>{var j;const o=((j=a.target.files)==null?void 0:j[0])??null;if(o){if(!["image/png","image/jpeg","image/jpg"].includes(o.type)){m(!0),r("icon",null),b("Gambar harus png, jpg, atau jpeg");return}if(o.size>2*1024*1024){m(!0),r("icon",null),b("Ukuran file maksimal 2MB!");return}}if(m(!1),r("icon",o),o){const p=new FileReader;p.onload=w=>{var x;return h((x=w.target)==null?void 0:x.result)},p.readAsDataURL(o)}else h(s.icon?`/storage/${s.icon}`:null)},placeholder:"Icon (opsional)"}),e.jsx(l,{message:t.icon})]}),e.jsxs(z,{className:"gap-2",children:[e.jsx(P,{asChild:!0,children:e.jsx(v,{variant:"secondary",onClick:()=>g(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(v,{disabled:I,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:"Simpan Perubahan"})})]})]})]})}export{ee as default};
