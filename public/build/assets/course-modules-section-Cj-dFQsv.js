import{r as h,j as e}from"./app-Du9Va_cx.js";import{D as y}from"./delete-dialog-BqKQUjHy.js";import{B as H}from"./badge-D-kEXLo2.js";import{B as p}from"./button-CX_a-yqV.js";import{D as g,a as L}from"./dialog-CyC8wE0d.js";import{S as O}from"./separator-C6OTpHmV.js";import{T as l,a as o,b as c}from"./tooltip-DkNZiPun.js";import P from"./create-lesson-BOpRb31J.js";import _ from"./create-module-BWEucm3K.js";import q from"./edit-lesson-CDTiwUlj.js";import w from"./edit-module-DLNH2nvJ.js";import{c as R}from"./createLucideIcon-Bp5WThYX.js";import{P as $}from"./plus-DVydiFCr.js";import{S as k}from"./square-pen-C-Pe8Dtp.js";import{T as M}from"./trash-BWSmsDxT.js";import{B as G}from"./badge-check-CrrIVRrg.js";import{L as K}from"./lock-B2JyxI_J.js";import{C as U}from"./circle-plus-xZYhnStV.js";/* empty css            */import"./alert-dialog-D-s1pMHF.js";import"./index-1r76Q9Oy.js";import"./index-DfyjvsAc.js";import"./index-H4dqj7Kw.js";import"./Combination-DRFv0060.js";import"./utils-CqiYvftL.js";import"./index-C3_krGyj.js";import"./x-BYrzKIXQ.js";import"./index-CyDQi5O5.js";import"./index-1W2oA-2t.js";import"./index-DqDuIf7A.js";import"./index-CUiXZJgQ.js";import"./index-C9kBKs8E.js";import"./floating-ui.react-dom-meN-PPdc.js";import"./index-J1Sv601L.js";import"./index-DUr3zujy.js";import"./index-Bj264vOk.js";import"./input-error-Vgzyj7RE.js";import"./input-DvXyHdct.js";import"./label-OTzwMRlW.js";import"./select-BJJKoCe1.js";import"./index-ynTekAlF.js";import"./index-DySSkRLM.js";import"./chevron-down-Do2gHek-.js";import"./check-BR_dNvJh.js";import"./chevron-up-DnRidEWn.js";import"./switch-BHWqfCgC.js";import"./textarea-BIvh0i3p.js";import"./Editor-DPdjW8-a.js";import"./index-ICAdJMQ7.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m20 13.7-2.1-2.1a2 2 0 0 0-2.8 0L9.7 17",key:"q6ojf0"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"10",cy:"8",r:"2",key:"2qkj4p"}]],J=R("BookImage",F);function Ge({modules:a,setModules:m}){const[E,N]=h.useState(!1),[b,x]=h.useState(!1),[j,v]=h.useState(null),[z,u]=h.useState(null),[t,f]=h.useState(null),T=r=>{m([...a,r]),N(!1)},I=r=>{if(j!==null){const i=[...a];i[j]={...i[j],...r},m(i)}x(!1),v(null)},A=r=>{m(a.filter((i,s)=>s!==r))},B=(r,i)=>{const s=[...a];s[r].lessons||(s[r].lessons=[]),s[r].lessons.push(i),m(s),u(null)},S=(r,i,s)=>{console.log("Editing lesson - Before:",s.title,"ID:",s.id);const n=[...a];if(n[r].lessons){const d=n[r].lessons[i],C={...s,id:s.id||d.id};console.log("Editing lesson - After:",C.title,"ID:",C.id),n[r].lessons[i]=C,m(n)}f(null)},D=(r,i)=>{const s=[...a];s[r].lessons&&(s[r].lessons.splice(i,1),m(s))};return e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{size:16}),e.jsx("h3",{className:"font-medium",children:"Materi Kelas"})]}),e.jsxs(g,{open:E,onOpenChange:N,children:[e.jsxs(l,{children:[e.jsx(o,{asChild:!0,children:e.jsx(L,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"size-8 hover:cursor-pointer",children:[e.jsx($,{}),e.jsx("span",{className:"sr-only",children:"Tambah Modul"})]})})}),e.jsx(c,{children:e.jsx("p",{children:"Tambah Modul"})})]}),e.jsx(_,{setOpen:N,onAdd:T})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("ul",{className:"space-y-2",children:a&&a.length>0?a.map((r,i)=>e.jsxs("li",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.title}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs(g,{open:b&&j===i,onOpenChange:s=>{x(s),s||v(null)},children:[e.jsxs(l,{children:[e.jsx(o,{asChild:!0,children:e.jsxs(p,{variant:"link",size:"icon",className:"size-8 hover:cursor-pointer",onClick:()=>{v(i),x(!0)},children:[e.jsx(k,{}),e.jsx("span",{className:"sr-only",children:"Edit Modul"})]})}),e.jsx(c,{children:e.jsx("p",{children:"Edit Modul"})})]}),e.jsx(w,{setOpen:x,onEdit:I,module:r})]}),e.jsxs(l,{children:[e.jsx(o,{asChild:!0,children:e.jsx("div",{children:e.jsx(y,{trigger:e.jsxs(p,{variant:"link",size:"icon",className:"size-8 text-red-500 hover:cursor-pointer",children:[e.jsx(M,{}),e.jsx("span",{className:"sr-only",children:"Hapus Modul"})]}),title:"Apakah Anda yakin ingin menghapus modul ini?",itemName:`Modul ${r.title}`,onConfirm:A.bind(null,i)})})}),e.jsx(c,{children:e.jsx("p",{children:"Hapus Modul"})})]})]})]}),r.description&&e.jsx("div",{className:"text-muted-foreground text-xs",children:r.description}),r.lessons&&r.lessons.length>0&&e.jsx("div",{className:"mt-2 space-y-2",children:r.lessons.map((s,n)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.is_free?e.jsxs(l,{children:[e.jsx(o,{asChild:!0,children:e.jsx(G,{size:"14",className:"hover:text-green-500"})}),e.jsx(c,{children:e.jsx("p",{children:"Materi Gratis"})})]}):e.jsxs(l,{children:[e.jsx(o,{asChild:!0,children:e.jsx(K,{size:"14",className:"hover:text-red-500"})}),e.jsx(c,{children:e.jsx("p",{children:"Materi Berbayar"})})]}),e.jsx("h4",{className:"text-sm",children:s.title})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(H,{className:"mr-2",children:s.type.charAt(0).toUpperCase()+s.type.slice(1)}),e.jsxs(g,{open:(t==null?void 0:t.modIdx)===i&&(t==null?void 0:t.lessonIdx)===n,onOpenChange:d=>{d||f(null)},children:[e.jsxs(l,{children:[e.jsx(o,{asChild:!0,children:e.jsxs(p,{variant:"link",size:"icon",className:"size-8 hover:cursor-pointer",onClick:()=>f({modIdx:i,lessonIdx:n}),children:[e.jsx(k,{}),e.jsx("span",{className:"sr-only",children:"Edit Materi"})]})}),e.jsx(c,{children:e.jsx("p",{children:"Edit Materi"})})]}),(t==null?void 0:t.modIdx)===i&&(t==null?void 0:t.lessonIdx)===n&&e.jsx(q,{setOpen:d=>{d||f(null)},onEdit:d=>S(i,n,d),lesson:s})]}),e.jsxs(l,{children:[e.jsx(o,{asChild:!0,children:e.jsx("div",{children:e.jsx(y,{trigger:e.jsxs(p,{variant:"link",size:"icon",className:"size-8 text-red-500 hover:cursor-pointer",children:[e.jsx(M,{}),e.jsx("span",{className:"sr-only",children:"Hapus Materi"})]}),title:"Apakah Anda yakin ingin menghapus materi ini?",itemName:`Materi ${s.title}`,onConfirm:D.bind(null,i,n)})})}),e.jsx(c,{children:e.jsx("p",{children:"Hapus Materi"})})]})]})]},n))}),e.jsxs(g,{open:z===i,onOpenChange:s=>u(s?i:null),children:[e.jsxs(l,{children:[e.jsx(o,{asChild:!0,children:e.jsxs(p,{size:"sm",variant:"outline",className:"mt-2 text-xs hover:cursor-pointer",onClick:()=>u(i),children:["Tambah Materi ",e.jsx(U,{})]})}),e.jsx(c,{children:e.jsx("p",{children:"Tambah Materi"})})]}),e.jsx(P,{setOpen:s=>u(s?i:null),onAdd:s=>B(i,s)})]}),e.jsx(O,{className:"my-4"})]},i)):e.jsx("li",{className:"text-muted-foreground text-sm",children:"Belum ada modul. Tambahkan modul baru."})})})]})}export{Ge as default};
