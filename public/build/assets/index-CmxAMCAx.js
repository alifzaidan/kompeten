import{K as Te,r as c,m as Fe,b as A,j as e,L as ue,$ as Y,S as Le}from"./app-BMZAA-xU.js";import{B as j}from"./button-B9UY3oX-.js";import{C as Re}from"./checkbox-C52sIiki.js";import{I as B}from"./input-CM8pf5Fb.js";import{L as C}from"./label-CPLRNZPo.js";import{S as Z}from"./separator-CvcUC0os.js";import{T as Ae}from"./sonner-C4Wlbsp7.js";import{t as d}from"./index-CXH2Nfpd.js";import{I as ee}from"./input-error-BJUYXJ2u.js";import{U as Be}from"./user-CgkzkQ1N.js";import{S as Ie}from"./shopping-cart-DkBivTUt.js";import{C as Me}from"./calendar-DSxrYX5B.js";import{L as xe}from"./loader-circle-hA7VW6i6.js";import{C as ae}from"./check-B3sdkhDE.js";import{R as pe}from"./refresh-cw-DiddUzCX.js";import{B as Ge}from"./badge-check-BfXzG64C.js";import{X as he}from"./x-DEi3MTdk.js";import{H as ze}from"./hourglass-DmThr637.js";import"./index-B6k9CUGY.js";import"./index-Rmos7Bav.js";import"./utils-BOHhQZSD.js";import"./index-DTGfmra2.js";import"./index-0dFD7ZM-.js";import"./index-B_QqFzDQ.js";import"./index-DtCGHZdU.js";import"./index-B9k1jMCM.js";import"./index-CpHoBDfB.js";import"./index-Bu-xoDrF.js";import"./createLucideIcon-gbwTMCmb.js";function ya({bootcamp:t,hasAccess:ge,pendingInvoice:m,referralInfo:H}){var me;const{auth:re}=Te().props,k=!!re.user,te=k&&((me=re.user)==null?void 0:me.phone_number),[q,se]=c.useState(!1),[D,p]=c.useState(!1),[h,ne]=c.useState(""),[i,E]=c.useState(null),[U,ie]=c.useState(!1),[K,T]=c.useState(""),[fe,oe]=c.useState(!1),[f,J]=c.useState({requirement_1_proof:null,requirement_2_proof:null,requirement_3_proof:null}),[le,F]=c.useState({requirement_1_proof:!1,requirement_2_proof:!1,requirement_3_proof:!1}),[y,b]=c.useState(!1),[X,I]=c.useState(!1),x=t.price===0,je=t.price,ye=(i==null?void 0:i.discount_amount)||0,ke=je-ye,M=x?0:5e3,be=x?0:ke+M,[Oe,$e]=c.useState(!1),{data:o,setData:w,post:we,processing:W,errors:Q,reset:Ne}=Fe({name:"",email:"",phone_number:"",password:"",password_confirmation:""});c.useEffect(()=>{if(!o.email||!o.email.includes("@")){b(!1);return}const a=setTimeout(async()=>{I(!0);try{const r=await A.post("/api/check-email",{email:o.email});r.data.exists?(b(!0),w("name",r.data.name||""),w("phone_number",r.data.phone_number||"")):b(!1)}catch(r){console.error("Error checking email:",r),b(!1)}finally{I(!1)}},500);return()=>clearTimeout(a)},[o.email]);const _e=a=>{a.preventDefault(),we(route("register"),{onFinish:()=>Ne("password","password_confirmation")})};c.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("ref");r?sessionStorage.setItem("referral_code",r):H.code&&sessionStorage.setItem("referral_code",H.code)},[H]),c.useEffect(()=>{if(!h.trim()||x){E(null),T("");return}const a=setTimeout(()=>{de()},500);return()=>clearTimeout(a)},[h]);const de=async()=>{var a,r;if(!(!h.trim()||x)){ie(!0),T("");try{const s={code:h,amount:t.price,product_type:"bootcamp",product_id:t.id};!k&&y&&o.email&&(s.email=o.email);const l=await A.post("/api/discount-codes/validate",s);l.data.valid?(E(l.data),T("")):(E(null),T(l.data.message||"Kode promo tidak valid"))}catch(s){E(null),T(((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"Terjadi kesalahan saat memvalidasi kode promo")}finally{ie(!1)}}},ce=async()=>{try{const r=await(await fetch("/csrf-token",{method:"GET",credentials:"same-origin"})).json(),s=document.querySelector('meta[name="csrf-token"]');return s&&(s.content=r.token),r.token}catch(a){throw console.error("Failed to refresh CSRF token:",a),a}},ve=a=>{if(a.preventDefault(),!te){alert("Profil Anda belum lengkap! Harap lengkapi nomor telepon terlebih dahulu."),window.location.href=route("profile.edit");return}if(!f.requirement_1_proof||!f.requirement_2_proof||!f.requirement_3_proof){alert("Harap upload semua bukti yang diperlukan!");return}p(!0);const r=new FormData;r.append("type","bootcamp"),r.append("id",t.id),r.append("requirement_1_proof",f.requirement_1_proof),r.append("requirement_2_proof",f.requirement_2_proof),r.append("requirement_3_proof",f.requirement_3_proof),Le.post(route("enroll.free"),r,{onError:s=>{alert(s.message||"Gagal mendaftar bootcamp gratis.")},onFinish:()=>{p(!1)}})},Se=async a=>{var s,l,g;if(a.preventDefault(),!k){if(!o.email||!o.name||!o.phone_number){d.error("Lengkapi data terlebih dahulu");return}p(!0);try{if(y){const n=await A.post("/auto-login",{email:o.email,phone_number:o.phone_number});if(!n.data.success)throw new Error(n.data.message||"Login gagal. Pastikan nomor telepon sesuai dengan yang terdaftar.");d.success("Login berhasil! Menyiapkan pembayaran..."),sessionStorage.setItem("pendingCheckout",JSON.stringify({bootcampId:t.id,productType:"bootcamp",termsAccepted:q,promoCode:h,discountData:i,timestamp:Date.now()})),await new Promise(u=>setTimeout(u,1e3)),window.location.reload();return}else{const n=await A.post("/register",{name:o.name,email:o.email,phone_number:o.phone_number,password:o.phone_number,password_confirmation:o.phone_number});if(!(n.data.success||n.status===200||n.status===201))throw new Error("Registrasi gagal");d.success("Registrasi berhasil! Menyiapkan pembayaran..."),sessionStorage.setItem("pendingCheckout",JSON.stringify({bootcampId:t.id,productType:"bootcamp",termsAccepted:q,promoCode:h,discountData:i,timestamp:Date.now()})),await new Promise(u=>setTimeout(u,1e3)),window.location.reload();return}}catch(n){console.error("Login/Register error:",n),p(!1),((s=n.response)==null?void 0:s.status)===419?d.error("Sesi telah berakhir. Silakan muat ulang halaman."):d.error(((g=(l=n.response)==null?void 0:l.data)==null?void 0:g.message)||n.message||"Gagal login/registrasi");return}}if(!q&&!x){d.error("Anda harus menyetujui syarat dan ketentuan!"),p(!1);return}if(D||p(!0),x){oe(!0),p(!1);return}const r=async(n=0)=>{var S;const u=t.strikethrough_price>0?t.strikethrough_price-t.price:0,G=(i==null?void 0:i.discount_amount)||0,L=t.price-G,z=L+5e3,R={type:"bootcamp",id:t.id,discount_amount:u+G,nett_amount:L,total_amount:z,transaction_fee:M};i!=null&&i.valid&&(R.discount_code_id=i.discount_code.id,R.discount_code_amount=i.discount_amount);try{const N=(S=document.querySelector('meta[name="csrf-token"]'))==null?void 0:S.content,_=await fetch(route("invoice.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":N||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(R)});if(_.status===419&&n<2)return await ce(),r(n+1);if(_.status===401&&n<2)return await new Promise(P=>setTimeout(P,2e3)),r(n+1);const v=await _.json();if(_.ok&&v.success)if(v.payment_url)sessionStorage.removeItem("pendingCheckout"),window.location.href=v.payment_url;else throw new Error("Payment URL not received");else throw new Error(v.message||"Gagal membuat invoice.")}catch(N){throw console.error("Payment error:",N),N}};try{await r()}catch(n){d.error(n.message||"Terjadi kesalahan saat proses pembayaran."),p(!1)}},Pe=(a,r=2)=>{const s=r*1024*1024;return a.size<=s},Ce=(a,r)=>{if(!r){J(s=>({...s,[a]:null})),F(s=>({...s,[a]:!1}));return}if(!Pe(r,2)){F(l=>({...l,[a]:!0}));const s=document.querySelector(`input[data-field="${a}"]`);s&&(s.value=""),d.error("Ukuran file terlalu besar. Maksimal 2MB.");return}if(!r.type.startsWith("image/")){F(l=>({...l,[a]:!0}));const s=document.querySelector(`input[data-field="${a}"]`);s&&(s.value=""),d.error("Hanya file gambar (JPG, PNG, GIF, dll) yang diperbolehkan.");return}J(s=>({...s,[a]:r})),F(s=>({...s,[a]:!1})),d.success("File berhasil diunggah.")},V=a=>{const r=new Date,l=new Date(a).getTime()-r.getTime();if(l<=0)return{time:"Sudah kadaluarsa",status:"expired"};const g=Math.floor(l/(1e3*60*60)),n=Math.floor(l%(1e3*60*60)/(1e3*60));return g<1?{time:`${n} menit lagi`,status:"urgent"}:{time:`${g} jam ${n} menit lagi`,status:g<3?"urgent":"normal"}},qe=a=>{if(!a)return null;switch(a){case"beginner":return e.jsx("span",{className:"rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"Beginner"});case"intermediate":return e.jsx("span",{className:"rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",children:"Intermediate"});case"advanced":return e.jsx("span",{className:"rounded-full bg-red-100 px-3 py-1 text-xs font-medium text-red-700 dark:bg-red-900/30 dark:text-red-300",children:"Advanced"});default:return null}};c.useEffect(()=>{const a=sessionStorage.getItem("pendingCheckout");if(a&&k)try{const r=JSON.parse(a),s=r.timestamp||0,l=Date.now(),g=5*60*1e3;if(l-s>g){sessionStorage.removeItem("pendingCheckout"),d.error("Sesi checkout telah kadaluarsa");return}if(r.bootcampId!==t.id){sessionStorage.removeItem("pendingCheckout");return}r.promoCode&&ne(r.promoCode),r.discountData&&E(r.discountData),se(r.termsAccepted||!1),d.success("Melanjutkan pembayaran..."),setTimeout(async()=>{p(!0);const n=async(u=0)=>{var N,_,v;const G=t.strikethrough_price>0?t.strikethrough_price-t.price:0,L=((N=r.discountData)==null?void 0:N.discount_amount)||0,z=t.price-L,R=z+5e3,S={type:"bootcamp",id:t.id,discount_amount:G+L,nett_amount:z,total_amount:R,transaction_fee:M};(_=r.discountData)!=null&&_.valid&&(S.discount_code_id=r.discountData.discount_code.id,S.discount_code_amount=r.discountData.discount_amount);try{const P=(v=document.querySelector('meta[name="csrf-token"]'))==null?void 0:v.content,O=await fetch(route("invoice.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":P||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(S)});if(O.status===419&&u<2)return await ce(),n(u+1);if(O.status===401&&u<2)return await new Promise(Ee=>setTimeout(Ee,2e3)),n(u+1);const $=await O.json();if(O.ok&&$.success)if($.payment_url)sessionStorage.removeItem("pendingCheckout"),window.location.href=$.payment_url;else throw new Error("Payment URL not received");else throw new Error($.message||"Gagal membuat invoice.")}catch(P){throw console.error("Payment error:",P),P}};try{await n()}catch(u){console.error("Failed to process payment:",u),d.error(u.message||"Terjadi kesalahan saat proses pembayaran."),sessionStorage.removeItem("pendingCheckout"),p(!1)}},2e3)}catch(r){console.error("Error processing pending checkout:",r),sessionStorage.removeItem("pendingCheckout"),d.error("Gagal memproses checkout")}},[k,t.id]);const De=()=>{if(m!=null&&m.invoice_url){window.location.href=m.invoice_url;return}window.location.reload()};return k&&!te?e.jsxs("div",{className:"min-h-screen bg-[url('/assets/images/bg-product.png')] bg-cover bg-center bg-no-repeat",children:[e.jsx(ue,{title:"Daftar Bootcamp"}),e.jsx("section",{className:"flex min-h-screen items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-6 rounded-2xl border bg-white/95 p-8 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"rounded-full bg-orange-100 p-6 dark:bg-orange-900/30",children:e.jsx(Be,{size:48,className:"text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mb-2 text-2xl font-bold",children:"Profil Belum Lengkap"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Harap lengkapi nomor telepon terlebih dahulu untuk melanjutkan pendaftaran"})]}),e.jsx(j,{asChild:!0,className:"w-full",size:"lg",children:e.jsx(Y,{href:route("profile.edit",{redirect:window.location.href}),children:"Lengkapi Profil"})})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-[url('/assets/images/bg-product.png')] bg-cover bg-center bg-no-repeat",children:[e.jsx(ue,{title:"Daftar Bootcamp"}),e.jsxs("section",{className:"mx-auto w-full max-w-7xl px-4 py-12",children:[e.jsxs("div",{className:"mb-8 px-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Y,{href:"/bootcamp",className:"hover:text-orange-600",children:"Bootcamp"}),e.jsx("span",{children:"/"}),e.jsx(Y,{href:`/bootcamp/${t.slug}`,className:"hover:text-orange-600",children:t.title}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:"Daftar"})]}),e.jsx("h1",{className:"mt-8 text-3xl font-bold text-gray-900 md:text-4xl dark:text-white",children:"Daftar Bootcamp"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:m?"lg:col-span-3":"lg:col-span-2",children:[e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"border-b bg-gray-50/80 p-4 dark:bg-gray-900/80",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[e.jsx(Ie,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Detail Pesanan"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-24 w-32 flex-shrink-0 overflow-hidden rounded-lg",children:e.jsx("img",{src:t.thumbnail?`/storage/${t.thumbnail}`:"/assets/images/placeholder.png",alt:t.title,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"mb-2 inline-block rounded-full bg-purple-100 px-3 py-1 text-xs font-medium text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",children:"Bootcamp"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900 dark:text-white",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[qe(t.level),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Me,{size:16}),e.jsxs("span",{children:[new Date(t.start_date).toLocaleDateString("id-ID",{day:"numeric",month:"short"})," ","-"," ",new Date(t.end_date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]})]})]})]})]})})]}),!k&&e.jsx("div",{className:"mt-6 overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:e.jsxs("form",{className:"flex flex-col gap-6 p-6",onSubmit:_e,children:[e.jsx("h1",{className:"text-xl font-bold",children:"Masukkan Data Diri Anda"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(C,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{id:"email",type:"email",required:!0,tabIndex:1,autoComplete:"email",value:o.email,onChange:a=>w("email",a.target.value),disabled:W,placeholder:"email@example.com",className:"pr-10"}),X&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:e.jsx(xe,{className:"h-4 w-4 animate-spin text-gray-400"})}),!X&&y&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:e.jsx(ae,{className:"h-5 w-5 text-green-600"})})]}),e.jsx(j,{type:"button",variant:"outline",size:"icon",onClick:async()=>{if(!o.email||!o.email.includes("@")){d.error("Masukkan email yang valid");return}I(!0);try{const a=await A.post("/api/check-email",{email:o.email});a.data.exists?(b(!0),w("name",a.data.name||""),w("phone_number",a.data.phone_number||""),d.success("Email ditemukan!")):(b(!1),d.info("Email tidak terdaftar"))}catch(a){console.error("Error checking email:",a),b(!1),d.error("Gagal mengecek email")}finally{I(!1)}},disabled:X||!o.email,className:"flex-shrink-0",children:e.jsx(pe,{className:"h-4 w-4"})})]}),y&&e.jsx("p",{className:"text-xs text-green-600",children:"Email ditemukan, data terisi otomatis"}),e.jsx(ee,{message:Q.email})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(C,{htmlFor:"name",children:"Nama"}),e.jsx(B,{id:"name",type:"text",required:!0,tabIndex:2,autoComplete:"name",value:o.name,onChange:a=>w("name",a.target.value),disabled:W||y,placeholder:"Nama lengkap Anda"}),e.jsx(ee,{message:Q.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(C,{htmlFor:"phone_number",children:"No. Telepon"}),e.jsx(B,{id:"phone_number",type:"tel",required:!0,tabIndex:3,autoComplete:"tel",value:o.phone_number,onChange:a=>w("phone_number",a.target.value),disabled:W||y,placeholder:"08xxxxxxxxxx"}),!y&&e.jsx("p",{className:"text-xs text-gray-500",children:"Nomor telepon akan digunakan sebagai password anda"}),y&&e.jsx("p",{className:"text-xs text-blue-600",children:"Pastikan nomor telepon sesuai dengan yang terdaftar"}),e.jsx(ee,{message:Q.phone_number})]})]})]})})]}),e.jsx("div",{className:m?"lg:col-span-3":"lg:col-span-1",children:ge?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-2xl border bg-white/95 p-6 text-center shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"rounded-full bg-green-100 p-4 dark:bg-green-900/30",children:e.jsx(Ge,{size:48,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-2 text-xl font-bold",children:"Sudah Memiliki Akses"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Anda sudah terdaftar di bootcamp ini. Silakan masuk ke grup."})]}),e.jsx(j,{asChild:!0,className:"w-full",size:"lg",children:e.jsx("a",{href:t.group_url??"",target:"_blank",rel:"noopener noreferrer",children:"Masuk Grup Bootcamp"})})]}):m?e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"border-b p-4 dark:bg-yellow-900/20",style:{backgroundColor:V(m.expires_at).status==="expired"&&m.status==="pending"?"#fee2e2":"rgba(254, 249, 195, 0.5)"},children:e.jsx("div",{className:"flex items-center gap-2",children:V(m.expires_at).status==="expired"&&m.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-5 w-5 text-red-600"}),e.jsx("h2",{className:"text-lg font-semibold text-red-700 dark:text-red-300",children:"Pembayaran Gagal"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h2",{className:"text-lg font-semibold text-yellow-900 dark:text-yellow-200",children:"Pembayaran Tertunda"})]})})}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"space-y-3 rounded-lg bg-gray-50 p-4 dark:bg-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No. Invoice"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:m.invoice_code})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Pembayaran"}),e.jsxs("span",{className:"text-xl font-bold text-orange-600",children:["Rp ",m.amount.toLocaleString("id-ID")]})]})]}),V(m.expires_at).status==="expired"&&m.status==="pending"?e.jsx("div",{className:"rounded-lg bg-red-50 p-4 dark:bg-red-900/20",children:e.jsxs("p",{className:"text-sm font-semibold text-red-700 dark:text-red-300",children:["Waktu pembayaran telah habis. Jika Anda sudah membayar atau butuh bantuan, silakan hubungi admin melaluiÂ ",e.jsx("a",{href:"https://wa.me/6289528514480",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-orange-600 underline",children:"WhatsApp Admin"}),"."]})}):e.jsx(e.Fragment,{children:e.jsx(j,{onClick:De,className:"w-full",size:"lg",children:"Lanjutkan Pembayaran"})}),e.jsx(j,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full",size:"lg",children:"Refresh"})]})]}):fe?e.jsx("form",{onSubmit:ve,children:e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"border-b bg-gray-50/80 p-4 dark:bg-gray-900/80",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Upload Bukti Persyaratan"})}),e.jsxs("div",{className:"space-y-4 p-6",children:[[1,2,3].map(a=>{const r=`requirement_${a}`,s=`requirement_${a}_proof`,l=t[r]||`Persyaratan ${a}`;return e.jsxs("div",{children:[e.jsxs(C,{htmlFor:s,children:["Bukti: ",l]}),e.jsx(B,{id:s,"data-field":s,type:"file",accept:"image/*",onChange:g=>{var n;return Ce(s,((n=g.target.files)==null?void 0:n[0])||null)},className:le[s]?"border-red-500":"",required:!0}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Screenshot atau bukti untuk: ",l," (Maks. 2MB)"]})]},a)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>{oe(!1),F({requirement_1_proof:!1,requirement_2_proof:!1,requirement_3_proof:!1}),J({requirement_1_proof:null,requirement_2_proof:null,requirement_3_proof:null})},className:"flex-1",children:"Kembali"}),e.jsx(j,{type:"submit",disabled:D||!f.requirement_1_proof||!f.requirement_2_proof||!f.requirement_3_proof||Object.values(le).some(a=>a),className:"flex-1",children:D?"Memproses...":"Dapatkan Akses Gratis"})]})]})]})}):e.jsx("form",{onSubmit:Se,children:e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"border-b bg-gray-50/80 p-4 dark:bg-gray-900/80",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:x?"Detail Pendaftaran":"Ringkasan Pembayaran"})}),e.jsxs("div",{className:"space-y-4 p-6",children:[x?e.jsxs("div",{className:"rounded-lg bg-green-50 p-6 text-center dark:bg-green-900/20",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"BOOTCAMP GRATIS"}),e.jsx("p",{className:"mt-2 text-sm text-green-700 dark:text-green-300",children:"Dapatkan akses dengan mengikuti persyaratan berikut"}),e.jsxs("ul",{className:"mt-4 space-y-1 text-left text-sm text-green-700 dark:text-green-300",children:[t.requirement_1&&e.jsxs("li",{children:["â€¢ ",t.requirement_1]}),t.requirement_2&&e.jsxs("li",{children:["â€¢ ",t.requirement_2]}),t.requirement_3&&e.jsxs("li",{children:["â€¢ ",t.requirement_3]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"promo-code",className:"text-sm font-medium",children:"Punya Kode Promo?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{id:"promo-code",type:"text",placeholder:"Masukkan kode promo",value:h,onChange:a=>ne(a.target.value.toUpperCase()),className:"pr-10"}),U&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:e.jsx(xe,{className:"h-4 w-4 animate-spin text-gray-400"})}),!U&&h&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:i!=null&&i.valid?e.jsx(ae,{className:"h-5 w-5 text-green-600"}):K?e.jsx(he,{className:"h-5 w-5 text-red-600"}):null})]}),e.jsx(j,{type:"button",variant:"outline",size:"icon",onClick:async()=>{if(!h.trim()){d.error("Masukkan kode promo terlebih dahulu");return}await de()},disabled:U||!h.trim(),className:"flex-shrink-0",children:e.jsx(pe,{className:"h-4 w-4"})})]}),K&&e.jsx("p",{className:"text-sm text-red-600",children:K}),(i==null?void 0:i.valid)&&e.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3 dark:border-green-800 dark:bg-green-900/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4 text-green-600"}),e.jsxs("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:['Promo "',i.discount_code.code,'" diterapkan!']})]}),e.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-300",children:i.discount_code.name})]})]}),e.jsx(Z,{}),e.jsxs("div",{className:"space-y-3",children:[t.strikethrough_price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Harga Asli"}),e.jsxs("span",{className:"font-medium text-gray-500 line-through dark:text-gray-400",children:["Rp ",t.strikethrough_price.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diskon"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-Rp ",(t.strikethrough_price-t.price).toLocaleString("id-ID")]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Harga Bootcamp"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["Rp ",t.price.toLocaleString("id-ID")]})]}),(i==null?void 0:i.valid)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Diskon Promo (",i.discount_code.code,")"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-Rp ",i.discount_amount.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Biaya Transaksi"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["Rp ",M.toLocaleString("id-ID")]})]}),e.jsx(Z,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:"Total Pembayaran"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["Rp ",be.toLocaleString("id-ID")]})]})]})]}),!x&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Re,{id:"terms",checked:q,onCheckedChange:a=>se(a===!0),className:"mt-1"}),e.jsxs(C,{htmlFor:"terms",className:"text-sm leading-relaxed text-gray-600 dark:text-gray-400",children:["Saya menyetujui"," ",e.jsx("a",{href:"/terms-and-conditions",target:"_blank",className:"font-medium text-orange-600 hover:underline",children:"syarat dan ketentuan"})," ","yang berlaku"]})]})]}),e.jsx(j,{className:"w-full",type:"submit",disabled:(x?!1:!q)||D,size:"lg",children:D?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Memproses..."]}):x?"Upload Bukti Follow":"Bayar Sekarang"}),e.jsx("p",{className:"text-center text-xs text-gray-500 dark:text-gray-400",children:"Pembayaran aman dan terenkripsi ðŸ”’"})]})]})})})]})]}),e.jsx(Ae,{position:"top-center",richColors:!0})]})}export{ya as default};
