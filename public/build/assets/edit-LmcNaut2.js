import{r as n,j as e,L as M,S as P}from"./app-B3wVvp7Q.js";import{B as L}from"./button-CHpVQBzx.js";import{u as B,F as z,a as l,b as m,c as d,d as y,e as c,f as h}from"./form-D2RNU-8s.js";import{I as v}from"./input-DEd_IB7X.js";import{S as I,a as K,b as U,c as _,d as D}from"./select-CzdPnKH7.js";import{T as G}from"./textarea-D11aPByZ.js";import{A as J}from"./admin-layout-BiVeX6UG.js";import{s as V,o as W,a as q,b as u}from"./types-B7ODdlOk.js";import{E as $}from"./Editor-CoD25Aib.js";import{t as N}from"./index-DMOdXjji.js";import{F as S}from"./file-text-MWhENMUi.js";import{C as H}from"./clock-D1qV4A6S.js";/* empty css            */import"./index-Qd2omNFz.js";import"./index-CCW6VlQC.js";import"./utils-Cx_xNk1e.js";import"./label-DzhhEM84.js";import"./index-CLNjrBH_.js";import"./index-CIzLg9zF.js";import"./index-DIDjvU1J.js";import"./index-COYA6pXk.js";import"./index-Btv03HWO.js";import"./index-HGTiXcud.js";import"./index-BmNTl2TC.js";import"./floating-ui.react-dom-BDHe46Rp.js";import"./index-BcQ5iyVG.js";import"./index-DDZPV-2E.js";import"./index-BKtlHtYI.js";import"./Combination-WS-7e2Km.js";import"./chevron-down-Bu3RDr5p.js";import"./createLucideIcon-DkMZzWTD.js";import"./check-BNsWd7VD.js";import"./chevron-up-CNc-NsP_.js";import"./sonner-BwNu0Fim.js";import"./breadcrumbs-BxDmW7Em.js";import"./index-BOdlRzdx.js";import"./x-oH7p7yGO.js";import"./tooltip-3v9IZ3Mk.js";import"./index-DLxfuvnm.js";import"./dropdown-menu-DNXThG9B.js";import"./avatar-DoeiVBIg.js";import"./use-initials-Cf7-j4rC.js";import"./user-DYc5kiGX.js";import"./breadcrumb-CPIhwGTz.js";import"./chevron-right-Cxhs_DSl.js";import"./app-sidebar-header-CW_WrGuN.js";import"./chevrons-up-down-DwGYVGS2.js";import"./user-check-Ca94L-MM.js";import"./users-DkAFAxXd.js";import"./monitor-play-Cdofd7cP.js";import"./presentation-CYBVDH2t.js";import"./gift-BS_qU5I1.js";import"./banknote-Db2JZH6a.js";import"./dollar-sign-1M7BJ1YN.js";import"./index-CAkQeBwg.js";const O=t=>[{title:"Artikel",href:route("articles.index")},{title:t.title,href:route("articles.show",t.id)},{title:"Edit Artikel",href:route("articles.edit",t.id)}],Q=W({title:u().min(1,"Judul harus diisi"),category_id:u().min(1,"Kategori harus dipilih"),excerpt:u().nullable().optional(),content:u().nullable().optional(),thumbnail:q().nullable()});function Ye({article:t,categories:C}){const[g,j]=n.useState(null),[E,x]=n.useState(!1),[F,T]=n.useState(0),[b,w]=n.useState(0),r=B({resolver:V(Q),defaultValues:{title:t.title??"",category_id:t.category_id??"",excerpt:t.excerpt??"",content:t.content??"",thumbnail:null}}),f=a=>{const i=a.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(o=>o.length>0).length,p=Math.max(1,Math.ceil(i/200));w(i),T(p)};n.useEffect(()=>{t.content&&f(t.content)},[t.content]);function A(a){const s={...a,_method:"PUT"};P.post(route("articles.update",t.id),s,{forceFormData:!0})}return e.jsxs(J,{breadcrumbs:O(t),children:[e.jsx(M,{title:`Edit Artikel - ${t.title}`}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:["Edit ",t.title]}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:"Edit informasi artikel. Perubahan akan meng-update slug dan URL jika judul berubah."}),e.jsx(z,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(A),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16}),e.jsx("h3",{className:"font-medium",children:"Informasi Artikel"})]}),e.jsx(l,{control:r.control,name:"title",render:({field:a})=>e.jsxs(m,{children:[e.jsxs(d,{children:["Judul Artikel ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(y,{children:e.jsx(v,{placeholder:"Masukkan judul artikel",...a,autoComplete:"off"})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"category_id",render:({field:a})=>e.jsxs(m,{children:[e.jsxs(d,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(I,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(y,{children:e.jsx(K,{children:e.jsx(U,{placeholder:"Pilih kategori"})})}),e.jsx(_,{children:C.map(s=>e.jsx(D,{value:s.id,children:s.name},s.id))})]}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"excerpt",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Ringkasan Singkat"}),e.jsx(G,{...a,value:a.value??"",placeholder:"Ringkasan singkat artikel (maks 500 karakter)",maxLength:500,rows:3,autoComplete:"off"}),e.jsx(h,{children:"Ringkasan yang akan ditampilkan di list artikel"}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"thumbnail",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Thumbnail"}),e.jsx("img",{src:g||(t.thumbnail?`/storage/${t.thumbnail}`:"/assets/images/placeholder.png"),alt:t.title,className:"my-1 mt-2 h-52 rounded border object-cover"}),e.jsx(v,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg, image/webp",className:E?"border-red-500 focus-visible:ring-red-500":"",onChange:s=>{var p;const i=((p=s.target.files)==null?void 0:p[0])??null;if(i){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(i.type)){x(!0),N.error("Gambar harus png, jpg, jpeg, atau webp");return}if(i.size>2*1024*1024){x(!0),N.error("Ukuran file maksimal 2MB!");return}}if(x(!1),a.onChange(i),i){const o=new FileReader;o.onload=R=>{var k;return j((k=R.target)==null?void 0:k.result)},o.readAsDataURL(i)}else j(null)}}),e.jsx(h,{children:"Format: PNG, JPG, JPEG, WEBP. Maksimal 2MB"}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16}),e.jsx("h3",{className:"font-medium",children:"Konten Artikel"})]}),e.jsx(l,{control:r.control,name:"content",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Konten"}),e.jsx($,{apiKey:"f3upn9g1gl6r4m6ybrpbtceg23fxg21slzsgyhg0bui1qq4m",value:a.value??"",onEditorChange:s=>{a.onChange(s),f(s)},init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount","code"],toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table codesample | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat | code",height:500,menubar:!1,content_style:'body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; font-size: 14px; }'}}),e.jsx(h,{children:"Tulis konten artikel dengan lengkap dan menarik"}),e.jsx(c,{})]})}),b>0&&e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Estimasi Waktu Baca"})]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[F," menit"]})]}),e.jsxs("p",{className:"mt-2 text-xs text-blue-700",children:[b.toLocaleString()," kata â€¢ Kecepatan baca rata-rata: 200 kata/menit"]})]}),e.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-4",children:[e.jsx("h4",{className:"mb-2 font-medium text-gray-900",children:"Status Artikel"}),e.jsx("div",{className:"space-y-2 text-sm text-gray-700",children:e.jsx("div",{className:"text-muted-foreground text-xs",children:"Ubah status artikel di halaman detail setelah menyimpan perubahan."})})]})]}),e.jsx(L,{type:"submit",className:"hover:cursor-pointer lg:col-span-2",disabled:r.formState.isSubmitting,children:r.formState.isSubmitting?"Menyimpan...":"Simpan Perubahan"})]})})]})]})}export{Ye as default};
