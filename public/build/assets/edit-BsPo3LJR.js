import{r as n,j as e,L as M,S as P}from"./app-BosIeRg7.js";import{B as L}from"./button-TMo85o57.js";import{u as B,F as z,a as l,b as m,c as d,d as y,e as c,f as h}from"./form-Ck7qMHgQ.js";import{I as v}from"./input-Dmo4WzKc.js";import{S as I,a as K,b as U,c as _,d as D}from"./select-H5ivWHbU.js";import{T as G}from"./textarea-CcNp8KRH.js";import{A as J}from"./admin-layout-BiSjvqE7.js";import{s as V,o as W,a as q,b as u}from"./types-CI4SqGhG.js";import{E as $}from"./Editor-BM3KdJu6.js";import{t as N}from"./index-DICbwMzx.js";import{F as S}from"./file-text-DfRjcFjY.js";import{C as H}from"./clock-B6d6AEa1.js";/* empty css            */import"./index-C6BQOKi5.js";import"./index-CtGk9L1P.js";import"./utils-s7bil_xp.js";import"./label-DkMhdupt.js";import"./index-BYdOno7l.js";import"./index-BkIJUB_F.js";import"./index-D5b9_BX5.js";import"./index-CdiTP_x4.js";import"./index-LTdIXPFw.js";import"./index-BWLzd_1T.js";import"./index-AbzvFQxn.js";import"./floating-ui.react-dom-KSuQb6xu.js";import"./index-D-LpAf02.js";import"./index-CXTDLnC7.js";import"./index-RpOf7_-b.js";import"./Combination-OR_foTDg.js";import"./chevron-down-C8Lewvy7.js";import"./createLucideIcon-BpQ-z4yv.js";import"./check-B8mMDSsr.js";import"./chevron-up-DcCLSShs.js";import"./sonner-TgCCCbnK.js";import"./breadcrumbs-Bod1dgXB.js";import"./index-Co6is8CA.js";import"./x-DyVjFITz.js";import"./tooltip-Bwq4-6Kr.js";import"./index-DlufhD0G.js";import"./dropdown-menu-DFa7Uoxv.js";import"./avatar-B6TjRBpk.js";import"./use-initials-S8Funam-.js";import"./user-BUrT8Ur8.js";import"./breadcrumb-Bjyb-tL8.js";import"./chevron-right-DfSErBBb.js";import"./app-sidebar-header-B-rOj9KG.js";import"./chevrons-up-down-DU0Gm5LB.js";import"./user-check-Db_aXoo4.js";import"./users-BudSnWF8.js";import"./monitor-play-B085WIka.js";import"./presentation-DKTxkwyK.js";import"./gift-ChOeZ2CC.js";import"./banknote-Dy7jErW4.js";import"./dollar-sign-fRR_DSUj.js";import"./index-BwapjOoU.js";const O=t=>[{title:"Artikel",href:route("articles.index")},{title:t.title,href:route("articles.show",t.id)},{title:"Edit Artikel",href:route("articles.edit",t.id)}],Q=W({title:u().min(1,"Judul harus diisi"),category_id:u().min(1,"Kategori harus dipilih"),excerpt:u().nullable().optional(),content:u().nullable().optional(),thumbnail:q().nullable()});function Ye({article:t,categories:C}){const[g,j]=n.useState(null),[E,x]=n.useState(!1),[F,T]=n.useState(0),[b,w]=n.useState(0),r=B({resolver:V(Q),defaultValues:{title:t.title??"",category_id:t.category_id??"",excerpt:t.excerpt??"",content:t.content??"",thumbnail:null}}),f=a=>{const i=a.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(o=>o.length>0).length,p=Math.max(1,Math.ceil(i/200));w(i),T(p)};n.useEffect(()=>{t.content&&f(t.content)},[t.content]);function A(a){const s={...a,_method:"PUT"};P.post(route("articles.update",t.id),s,{forceFormData:!0})}return e.jsxs(J,{breadcrumbs:O(t),children:[e.jsx(M,{title:`Edit Artikel - ${t.title}`}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:["Edit ",t.title]}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:"Edit informasi artikel. Perubahan akan meng-update slug dan URL jika judul berubah."}),e.jsx(z,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(A),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16}),e.jsx("h3",{className:"font-medium",children:"Informasi Artikel"})]}),e.jsx(l,{control:r.control,name:"title",render:({field:a})=>e.jsxs(m,{children:[e.jsxs(d,{children:["Judul Artikel ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(y,{children:e.jsx(v,{placeholder:"Masukkan judul artikel",...a,autoComplete:"off"})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"category_id",render:({field:a})=>e.jsxs(m,{children:[e.jsxs(d,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(I,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(y,{children:e.jsx(K,{children:e.jsx(U,{placeholder:"Pilih kategori"})})}),e.jsx(_,{children:C.map(s=>e.jsx(D,{value:s.id,children:s.name},s.id))})]}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"excerpt",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Ringkasan Singkat"}),e.jsx(G,{...a,value:a.value??"",placeholder:"Ringkasan singkat artikel (maks 500 karakter)",maxLength:500,rows:3,autoComplete:"off"}),e.jsx(h,{children:"Ringkasan yang akan ditampilkan di list artikel"}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"thumbnail",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Thumbnail"}),e.jsx("img",{src:g||(t.thumbnail?`/storage/${t.thumbnail}`:"/assets/images/placeholder.png"),alt:t.title,className:"my-1 mt-2 h-52 rounded border object-cover"}),e.jsx(v,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg, image/webp",className:E?"border-red-500 focus-visible:ring-red-500":"",onChange:s=>{var p;const i=((p=s.target.files)==null?void 0:p[0])??null;if(i){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(i.type)){x(!0),N.error("Gambar harus png, jpg, jpeg, atau webp");return}if(i.size>2*1024*1024){x(!0),N.error("Ukuran file maksimal 2MB!");return}}if(x(!1),a.onChange(i),i){const o=new FileReader;o.onload=R=>{var k;return j((k=R.target)==null?void 0:k.result)},o.readAsDataURL(i)}else j(null)}}),e.jsx(h,{children:"Format: PNG, JPG, JPEG, WEBP. Maksimal 2MB"}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16}),e.jsx("h3",{className:"font-medium",children:"Konten Artikel"})]}),e.jsx(l,{control:r.control,name:"content",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Konten"}),e.jsx($,{apiKey:"f3upn9g1gl6r4m6ybrpbtceg23fxg21slzsgyhg0bui1qq4m",value:a.value??"",onEditorChange:s=>{a.onChange(s),f(s)},init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount","code"],toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table codesample | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat | code",height:500,menubar:!1,content_style:'body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; font-size: 14px; }'}}),e.jsx(h,{children:"Tulis konten artikel dengan lengkap dan menarik"}),e.jsx(c,{})]})}),b>0&&e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Estimasi Waktu Baca"})]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[F," menit"]})]}),e.jsxs("p",{className:"mt-2 text-xs text-blue-700",children:[b.toLocaleString()," kata â€¢ Kecepatan baca rata-rata: 200 kata/menit"]})]}),e.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-4",children:[e.jsx("h4",{className:"mb-2 font-medium text-gray-900",children:"Status Artikel"}),e.jsx("div",{className:"space-y-2 text-sm text-gray-700",children:e.jsx("div",{className:"text-muted-foreground text-xs",children:"Ubah status artikel di halaman detail setelah menyimpan perubahan."})})]})]}),e.jsx(L,{type:"submit",className:"hover:cursor-pointer lg:col-span-2",disabled:r.formState.isSubmitting,children:r.formState.isSubmitting?"Menyimpan...":"Simpan Perubahan"})]})})]})]})}export{Ye as default};
