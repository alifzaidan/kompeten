import{r as f,j as e,L as C,$ as n}from"./app-ByYcdn8-.js";import{A as S,a as B,b as P,c as I,d as L,e as T,f as v,g as A,h as z}from"./alert-dialog-IA5tp-uO.js";import{B as R,a as F,b as m,d as k,e as y,c as K}from"./breadcrumb-Dr2NNSwF.js";import{B as r}from"./button-CPZREZ85.js";import{t as o}from"./index-CGepVr37.js";import{C as c}from"./clock-xpBpkj5m.js";import{C as d}from"./circle-x-D-OHYL1j.js";import{T as $}from"./triangle-alert-CT_8viGW.js";import{E as w}from"./external-link-bx0P952L.js";import{F as E}from"./file-text-DLEzwTf1.js";import{H as O}from"./house-ICUxGhVr.js";import{C as N}from"./circle-check-Ca_O2TLn.js";/* empty css            */import"./index-DCdKzY7e.js";import"./index-COBmB5dm.js";import"./index-f2bHSftT.js";import"./Combination-DxPlOGRw.js";import"./utils-yhlFNeVc.js";import"./chevron-right-9pzf-_22.js";import"./createLucideIcon-CBgsdzEp.js";import"./index-aZYIIwcL.js";function xe({invoice:a}){const[x,u]=f.useState(!1),[_,h]=f.useState(!1),l=a.expires_at&&new Date>new Date(a.expires_at),g=a.expires_at?new Date(a.expires_at).getTime()-new Date().getTime():0,b=Math.floor(g/(1e3*60*60)),p=Math.floor(g%(1e3*60*60)/(1e3*60)),t=(()=>{if(a.course_items&&a.course_items.length>0){const s=a.course_items[0].course;return{type:"course",name:s.title,slug:s.slug,thumbnail:s.thumbnail,profileRoute:"profile.course.detail",publicRoute:"course.detail",badge:"Kelas Online"}}else if(a.bootcamp_items&&a.bootcamp_items.length>0){const s=a.bootcamp_items[0].bootcamp;return{type:"bootcamp",name:s.title,slug:s.slug,thumbnail:s.thumbnail,profileRoute:"profile.bootcamp.detail",publicRoute:"bootcamp.detail",badge:"Bootcamp"}}else if(a.webinar_items&&a.webinar_items.length>0){const s=a.webinar_items[0].webinar;return{type:"webinar",name:s.title,slug:s.slug,thumbnail:s.thumbnail,profileRoute:"profile.webinar.detail",publicRoute:"webinar.detail",badge:"Webinar"}}return null})(),D=async()=>{var s;u(!0),h(!1);try{const j=await(await fetch(route("invoice.cancel",{id:a.id}),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content)||""}})).json();j.success?(o.success("Pesanan berhasil dibatalkan dan invoice telah dinonaktifkan."),window.location.reload()):o.error(j.message||"Gagal membatalkan pesanan.")}catch{o.error("Terjadi kesalahan saat membatalkan pesanan.")}finally{u(!1)}},i=a.status==="paid"?{icon:e.jsx(N,{size:48,className:"text-green-600"}),title:"Pembayaran Berhasil!",subtitle:"Transaksi Anda telah berhasil diproses",gradient:"from-green-500 to-emerald-600",statusBadge:e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700 dark:bg-green-900/30 dark:text-green-300",children:[e.jsx(N,{size:14}),"Berhasil"]})}:a.status==="pending"&&!l?{icon:e.jsx(c,{size:48,className:"text-yellow-600"}),title:"Menunggu Pembayaran",subtitle:`Selesaikan pembayaran dalam ${b} jam ${p} menit`,gradient:"from-yellow-500 to-orange-600",statusBadge:e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",children:[e.jsx(c,{size:14}),"Pending"]})}:a.status==="pending"&&l?{icon:e.jsx(d,{size:48,className:"text-red-600"}),title:"Pembayaran Kedaluwarsa",subtitle:"Waktu pembayaran telah habis",gradient:"from-red-500 to-rose-600",statusBadge:e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-100 px-3 py-1 text-xs font-medium text-red-700 dark:bg-red-900/30 dark:text-red-300",children:[e.jsx(d,{size:14}),"Kedaluwarsa"]})}:{icon:e.jsx(d,{size:48,className:"text-red-600"}),title:"Pembayaran Dibatalkan",subtitle:"Transaksi telah dibatalkan",gradient:"from-red-500 to-rose-600",statusBadge:e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-100 px-3 py-1 text-xs font-medium text-red-700 dark:bg-red-900/30 dark:text-red-300",children:[e.jsx(d,{size:14}),"Dibatalkan"]})};return e.jsxs("div",{children:[e.jsx(C,{title:`Invoice ${a.invoice_code}`}),e.jsx("div",{className:"min-h-screen bg-[url('/assets/images/bg-product.png')] bg-cover bg-center bg-no-repeat",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 py-12",children:[e.jsx(R,{className:"mb-6",children:e.jsxs(F,{children:[e.jsx(m,{children:e.jsx(k,{asChild:!0,children:e.jsx(n,{href:"/",children:"Beranda"})})}),e.jsx(y,{children:"/"}),e.jsx(m,{children:e.jsx(k,{asChild:!0,children:e.jsx(n,{href:"/profile/transactions",children:"Transaksi Saya"})})}),e.jsx(y,{children:"/"}),e.jsx(m,{children:e.jsxs(K,{children:["Invoice #",a.invoice_code]})})]})}),e.jsx("div",{className:"mx-auto w-full max-w-3xl",children:e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/95",children:[e.jsxs("div",{className:`border-b bg-gradient-to-r ${i.gradient} p-8 text-center dark:border-gray-700`,children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-white shadow-lg",children:i.icon}),e.jsx("h1",{className:"mb-2 text-3xl font-bold text-white",children:i.title}),e.jsx("p",{className:"text-white/90",children:i.subtitle}),e.jsxs("p",{className:"mt-2 text-sm text-white/80",children:["Invoice #",a.invoice_code]})]}),e.jsxs("div",{className:"p-8",children:[t&&e.jsxs("div",{className:"mb-6 rounded-lg border bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-900/50",children:[e.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"mb-2 inline-block rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",children:t.badge}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.name})]}),e.jsx("img",{src:t.thumbnail?`/storage/${t.thumbnail}`:"/assets/images/placeholder.png",alt:t.name,className:"h-16 w-16 rounded-lg object-cover"})]}),e.jsxs("div",{className:"space-y-2 border-t pt-4 dark:border-gray-700",children:[a.discount_amount>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Harga Asli"}),e.jsxs("span",{className:"text-gray-500 line-through",children:["Rp ",(a.discount_amount+a.nett_amount).toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diskon"}),e.jsxs("span",{className:"font-medium text-green-600",children:["- Rp ",a.discount_amount.toLocaleString("id-ID")]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["Rp ",a.nett_amount.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Biaya Transaksi"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["Rp ",(a.amount-a.nett_amount).toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t pt-2 dark:border-gray-700",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:"Total Pembayaran"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["Rp ",a.amount.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),i.statusBadge]})]})]}),e.jsxs("div",{className:"mb-6 rounded-lg border bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-900/50",children:[e.jsx("h3",{className:"mb-4 font-semibold text-gray-900 dark:text-white",children:"Informasi Pembayaran"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[a.payment_method&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Metode Pembayaran"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.payment_method})]}),a.paid_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Dibayar pada"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(a.paid_at).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),a.expires_at&&a.status==="pending"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Kedaluwarsa"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(a.expires_at).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),a.status==="pending"&&!l&&e.jsx("div",{className:"mb-6 rounded-lg border border-yellow-200 bg-yellow-50 p-4 dark:border-yellow-700 dark:bg-yellow-900/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(c,{className:"mt-0.5 h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Segera selesaikan pembayaran!"}),e.jsxs("p",{className:"mt-1 text-sm text-yellow-700 dark:text-yellow-300",children:["Pembayaran akan kedaluwarsa dalam ",b," jam ",p," menit. Setelah kedaluwarsa, invoice tidak dapat digunakan."]})]})]})}),a.status==="pending"&&l&&e.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-700 dark:bg-red-900/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:"mt-0.5 h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800 dark:text-red-200",children:"Invoice Kedaluwarsa"}),e.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:"Invoice ini sudah kedaluwarsa dan tidak dapat dibayar lagi. Silakan buat pesanan baru jika masih ingin membeli."})]})]})}),a.status==="failed"&&e.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-700 dark:bg-red-900/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{className:"mt-0.5 h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800 dark:text-red-200",children:"Pembayaran Dibatalkan"}),e.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:"Invoice ini telah dibatalkan dan tidak dapat dibayar lagi. Silakan buat pesanan baru jika masih ingin membeli."})]})]})}),e.jsxs("div",{className:"space-y-3",children:[a.status==="pending"&&!l&&a.invoice_url&&e.jsxs(e.Fragment,{children:[e.jsx(r,{asChild:!0,className:"w-full",size:"lg",children:e.jsx("a",{href:a.invoice_url,target:"_blank",rel:"noopener noreferrer",children:"Lanjutkan Pembayaran"})}),e.jsxs(S,{open:_,onOpenChange:h,children:[e.jsx(B,{asChild:!0,children:e.jsx(r,{variant:"outline",size:"lg",className:"w-full",disabled:x,children:x?"Membatalkan...":"Batalkan Pesanan"})}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(L,{children:"Batalkan Pesanan?"}),e.jsx(T,{children:"Apakah Anda yakin ingin membatalkan pesanan ini? Invoice akan dinonaktifkan dan tidak dapat dibayar lagi. Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(v,{children:[e.jsx(A,{children:"Tidak, Pertahankan"}),e.jsx(z,{onClick:D,className:"bg-red-600 hover:bg-red-700",children:"Ya, Batalkan Pesanan"})]})]})]})]}),a.status==="paid"&&t&&e.jsxs(e.Fragment,{children:[e.jsx(r,{asChild:!0,className:"w-full",size:"lg",children:e.jsxs(n,{href:route(t.profileRoute,{[t.type]:t.slug}),children:[e.jsx(w,{className:"mr-2 h-5 w-5"}),"Akses ",t.badge]})}),e.jsx(r,{asChild:!0,variant:"outline",className:"w-full",size:"lg",children:e.jsxs("a",{href:route("invoice.pdf",{id:a.id}),target:"_blank",rel:"noopener noreferrer",children:[e.jsx(E,{className:"mr-2 h-5 w-5"}),"Unduh Invoice (PDF)"]})})]}),(a.status==="failed"||l)&&e.jsxs(e.Fragment,{children:[e.jsx(r,{asChild:!0,className:"w-full",size:"lg",children:e.jsxs(n,{href:"/",children:[e.jsx(O,{className:"mr-2 h-5 w-5"}),"Kembali ke Beranda"]})}),t&&e.jsx(r,{asChild:!0,variant:"outline",className:"w-full",size:"lg",children:e.jsxs(n,{href:route(t.publicRoute,{[t.type]:t.slug}),children:[e.jsx(w,{className:"mr-2 h-5 w-5"}),"Lihat Detail Produk"]})})]}),e.jsx(r,{asChild:!0,variant:"ghost",className:"w-full",size:"lg",children:e.jsx(n,{href:"/profile/transactions",children:"Lihat Semua Transaksi"})})]})]}),e.jsx("div",{className:"border-t bg-gray-50 p-6 text-center dark:border-gray-700 dark:bg-gray-900/50",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Butuh bantuan?"," ",e.jsx("a",{href:"https://wa.me/+6289528514480",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-orange-600 hover:underline",children:"Hubungi Customer Service"})]})})]})})]})})]})}export{xe as default};
